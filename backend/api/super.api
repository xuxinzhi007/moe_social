syntax = "v1"

info (
	title:   "Super API"
	desc:    "Super WebProject API documentation"
	author:  "Super Team"
	email:   "team@super.com"
	version: "1.0.0"
)

// 通用响应结构
type BaseResp {
	Code    int    `json:"code"`
	Message string `json:"message"`
	Success bool   `json:"success"`
}

// 用户相关结构
type User {
	Id              string  `json:"id"`
	Username        string  `json:"username"`
	Email           string  `json:"email"`
	Avatar          string  `json:"avatar"`
	Signature       string  `json:"signature"`
	Gender          string  `json:"gender"`
	Birthday        string  `json:"birthday,omitempty"`
	CreatedAt       string  `json:"created_at"`
	UpdatedAt       string  `json:"updated_at"`
	IsVip           bool    `json:"is_vip"`
	VipExpiresAt    string  `json:"vip_expires_at"`
	AutoRenew       bool    `json:"auto_renew"`
	Balance         float64 `json:"balance"`
	Inventory       string  `json:"inventory"`
	EquippedFrameId string  `json:"equipped_frame_id"`
}

// VIP套餐相关结构
type VipPlan {
	Id           string  `json:"id"`
	Name         string  `json:"name"`
	Description  string  `json:"description"`
	Price        float64 `json:"price"`
	DurationDays int     `json:"duration_days"`
	CreatedAt    string  `json:"created_at"`
	UpdatedAt    string  `json:"updated_at"`
}

// VIP订单相关结构
type VipOrder {
	Id        string  `json:"id"`
	UserId    string  `json:"user_id"`
	PlanId    string  `json:"plan_id"`
	PlanName  string  `json:"plan_name"`
	Amount    float64 `json:"amount"`
	Status    string  `json:"status"`
	CreatedAt string  `json:"created_at"`
	PaidAt    string  `json:"paid_at"`
}

// VIP记录相关结构
type VipRecord {
	Id        string `json:"id"`
	UserId    string `json:"user_id"`
	PlanId    string `json:"plan_id"`
	PlanName  string `json:"plan_name"`
	StartAt   string `json:"start_at"`
	EndAt     string `json:"end_at"`
	Status    string `json:"status"`
	CreatedAt string `json:"created_at"`
}

// 用户记忆相关结构
type UserMemory {
	Id        string `json:"id"`
	UserId    string `json:"user_id"`
	Key       string `json:"key"`
	Value     string `json:"value"`
	CreatedAt string `json:"created_at"`
	UpdatedAt string `json:"updated_at"`
}

// 交易记录相关结构
type Transaction {
	Id          string  `json:"id"`
	UserId      string  `json:"user_id"`
	Type        string  `json:"type"`
	Amount      float64 `json:"amount"`
	Description string  `json:"description"`
	Status      string  `json:"status"`
	CreatedAt   string  `json:"created_at"`
}

// 帖子相关结构
type Post {
	Id         string     `json:"id"`
	UserId     string     `json:"user_id"`
	UserName   string     `json:"user_name"`
	UserAvatar string     `json:"user_avatar"`
	Content    string     `json:"content"`
	Images     []string   `json:"images"`
	TopicTags  []TopicTag `json:"topic_tags"`
	Likes      int        `json:"likes"`
	Comments   int        `json:"comments"`
	IsLiked    bool       `json:"is_liked"`
	CreatedAt  string     `json:"created_at"`
}

// 话题标签结构
type TopicTag {
	Id    string `json:"id,optional"`
	Name  string `json:"name"`
	Color string `json:"color"`
}

// 评论相关结构
type Comment {
	Id         string `json:"id"`
	PostId     string `json:"post_id"`
	UserId     string `json:"user_id"`
	UserName   string `json:"user_name"`
	UserAvatar string `json:"user_avatar"`
	Content    string `json:"content"`
	Likes      int    `json:"likes"`
	IsLiked    bool   `json:"is_liked"`
	CreatedAt  string `json:"created_at"`
}

// 通知相关结构
type Notification {
	Id           string `json:"id"`
	UserId       string `json:"user_id"`
	SenderId     string `json:"sender_id"`
	SenderName   string `json:"sender_name"`
	SenderAvatar string `json:"sender_avatar"`
	Type         int    `json:"type"` // 1:点赞 2:评论 3:关注 4:系统
	PostId       string `json:"post_id,optional"`
	Content      string `json:"content,optional"`
	IsRead       bool   `json:"is_read"`
	CreatedAt    string `json:"created_at"`
}

type GetNotificationsReq {
	UserId   string `form:"user_id"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

type GetNotificationsResp {
	BaseResp
	Data  []Notification `json:"data"`
	Total int            `json:"total"`
}

type GetUnreadCountReq {
	UserId string `form:"user_id"`
}

type GetUnreadCountResp {
	BaseResp
	Data int `json:"data"`
}

type ReadNotificationReq {
	Id     string `path:"id"`
	UserId string `json:"user_id"`
}

type ReadAllNotificationsReq {
	UserId string `json:"user_id"`
}

// 请求和响应结构
// 通用请求
type EmptyReq {}

// 关注相关结构
type FollowUserResp {
	BaseResp
	Data bool `json:"data"`
}

type GetFollowingsReq {
	UserId   string `path:"user_id"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

type GetFollowersReq {
	UserId   string `path:"user_id"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

type CheckFollowReq {
	FollowerId  string `path:"follower_id"`
	FollowingId string `path:"following_id"`
}

type FollowUserReq {
	UserId      string `path:"user_id"`
	FollowingId string `json:"following_id"`
}

type UnfollowUserReq {
	UserId      string `path:"user_id"`
	FollowingId string `json:"following_id"`
}

type GetFollowingsResp {
	BaseResp
	Data  []User `json:"data"`
	Total int    `json:"total"`
}

type GetFollowersResp {
	BaseResp
	Data  []User `json:"data"`
	Total int    `json:"total"`
}

type CheckFollowResp {
	BaseResp
	Data bool `json:"data"`
}

// 用户相关请求
type RegisterReq {
	Username string `json:"username"`
	Password string `json:"password"`
	Email    string `json:"email"`
}

type LoginReq {
	Username string `json:"username,optional"`
	Email    string `json:"email,optional"`
	Password string `json:"password"`
}

type GetUserInfoReq {
	UserId string `path:"user_id"`
}

type GetUserReq {
	UserId string `path:"user_id"`
}

type UpdateUserInfoReq {
	UserId             string `path:"user_id"`
	Username           string `json:"username,optional"`
	Email              string `json:"email,optional"`
	Avatar             string `json:"avatar,optional"`
	Signature          string `json:"signature,optional"`
	Gender             string `json:"gender,optional"`
	Birthday           string `json:"birthday,optional"`
	Inventory          string `json:"inventory,optional"`
	EquippedFrameId    string `json:"equipped_frame_id,optional"`
	ClearEquippedFrame bool   `json:"clear_equipped_frame,optional"`
}

type UpdateUserPasswordReq {
	UserId      string `path:"user_id"`
	OldPassword string `json:"old_password"`
	NewPassword string `json:"new_password"`
}

type ResetPasswordReq {
	Email       string `json:"email"`
	NewPassword string `json:"new_password"`
}

type DeleteUserReq {
	UserId string `path:"user_id"`
}

type UpdateUserVipReq {
	UserId     string `path:"user_id"`
	IsVip      bool   `json:"is_vip"`
	VipExpires string `json:"vip_expires"`
}

type GetUsersReq {
	Page     int `form:"page,default=1"`
	PageSize int `form:"page_size,default=10"`
}

// VIP相关请求
type GetVipPlanReq {
	PlanId string `path:"plan_id"`
}

type CreateVipPlanReq {
	Name         string  `json:"name"`
	Description  string  `json:"description"`
	Price        float64 `json:"price"`
	DurationDays int     `json:"duration_days"`
}

type UpdateAutoRenewReq {
	UserId    string `path:"user_id"`
	AutoRenew bool   `json:"auto_renew"`
}

type GetVipOrdersReq {
	UserId   string `path:"user_id"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

type GetVipHistoryReq {
	UserId   string `path:"user_id"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

type CreateVipOrderReq {
	UserId string `path:"user_id"`
	PlanId string `json:"plan_id"`
}

type CheckUserVipReq {
	UserId string `path:"user_id"`
}

type SyncUserVipStatusReq {
	UserId string `path:"user_id"`
}

type GetUserActiveVipRecordReq {
	UserId string `path:"user_id"`
}

// 用户记忆相关请求
type UpsertUserMemoryReq {
	UserId string `path:"user_id"`
	Key    string `json:"key"`
	Value  string `json:"value"`
}

type GetUserMemoriesReq {
	UserId string `path:"user_id"`
}

type DeleteUserMemoryReq {
	UserId string `path:"user_id"`
	Key    string `form:"key"`
}

// 帖子相关请求
type GetPostsReq {
	Page     int `form:"page,default=1"`
	PageSize int `form:"page_size,default=10"`
}

type GetPostReq {
	PostId string `path:"post_id"`
}

type CreatePostReq {
	UserId    string     `json:"user_id"`
	Content   string     `json:"content"`
	Images    []string   `json:"images,optional"`
	TopicTags []TopicTag `json:"topic_tags,optional"`
}

type LikePostReq {
	PostId string `path:"post_id"`
	UserId string `json:"user_id"`
}

type GetPostCommentsReq {
	PostId   string `path:"post_id"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

// 评论相关请求
type CreateCommentReq {
	PostId  string `json:"post_id"`
	UserId  string `json:"user_id"`
	Content string `json:"content"`
}

type LikeCommentReq {
	CommentId string `path:"comment_id"`
	UserId    string `json:"user_id"`
}

type GetTransactionsReq {
	UserId   string `path:"user_id"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

type GetTransactionReq {
	TransactionId string `path:"transaction_id"`
}

type RechargeReq {
	UserId      string  `path:"user_id"`
	Amount      float64 `json:"amount"`
	Description string  `json:"description"`
}

// 通用响应
type EmptyResp {}

// 用户相关响应
type RegisterResp {
	BaseResp
	Data User `json:"data"`
}

type LoginData {
	User  User   `json:"user"`
	Token string `json:"token"`
}

type LoginResp {
	BaseResp
	Data LoginData `json:"data"`
}

type GetUserInfoResp {
	BaseResp
	Data User `json:"data"`
}

type GetUserResp {
	BaseResp
	Data User `json:"data"`
}

type UpdateUserInfoResp {
	BaseResp
	Data User `json:"data"`
}

type UpdateUserPasswordResp {
	BaseResp
}

type ResetPasswordResp {
	BaseResp
}

type GetUserByEmailReq {
	Email string `json:"email"`
}

type GetUserByEmailResp {
	BaseResp
	Data User `json:"data"`
}

type DeleteUserResp {
	BaseResp
}

type UpdateUserVipResp {
	BaseResp
	Data User `json:"data"`
}

type GetUsersResp {
	BaseResp
	Data  []User `json:"data"`
	Total int    `json:"total"`
}

type GetUserCountResp {
	BaseResp
	Data int `json:"data"`
}

// VIP相关响应
type GetVipPlanResp {
	BaseResp
	Data VipPlan `json:"data"`
}

type CreateVipPlanResp {
	BaseResp
	Data VipPlan `json:"data"`
}

type GetVipPlansResp {
	BaseResp
	Data []VipPlan `json:"data"`
}

type CreateVipOrderResp {
	BaseResp
	Data VipOrder `json:"data"`
}

type GetVipOrdersResp {
	BaseResp
	Data  []VipOrder `json:"data"`
	Total int        `json:"total"`
}

type GetVipHistoryResp {
	BaseResp
	Data  []VipRecord `json:"data"`
	Total int         `json:"total"`
}

type GetUserActiveVipRecordResp {
	BaseResp
	Data VipRecord `json:"data"`
}

type GetTransactionsResp {
	BaseResp
	Data  []Transaction `json:"data"`
	Total int           `json:"total"`
}

type GetTransactionResp {
	BaseResp
	Data Transaction `json:"data"`
}

type RechargeResp {
	BaseResp
	Data Transaction `json:"data"`
}

// 用户记忆相关响应
type UpsertUserMemoryResp {
	BaseResp
	Data UserMemory `json:"data"`
}

type GetUserMemoriesResp {
	BaseResp
	Data []UserMemory `json:"data"`
}

type DeleteUserMemoryResp {
	BaseResp
}

// 嵌套类型定义
type UserVipStatusData {
	IsVip     bool   `json:"is_vip"`
	ExpiresAt string `json:"expires_at"`
	AutoRenew bool   `json:"auto_renew"`
}

type SyncUserVipStatusData {
	IsVip     bool   `json:"is_vip"`
	ExpiresAt string `json:"expires_at"`
}

// 响应类型定义
type GetUserVipStatusResp {
	BaseResp
	Data UserVipStatusData `json:"data"`
}

type CheckUserVipResp {
	BaseResp
	Data bool `json:"data"`
}

type SyncUserVipStatusResp {
	BaseResp
	Data SyncUserVipStatusData `json:"data"`
}

// 帖子相关响应
type GetPostsResp {
	BaseResp
	Data  []Post `json:"data"`
	Total int    `json:"total"`
}

type GetPostResp {
	BaseResp
	Data Post `json:"data"`
}

type CreatePostResp {
	BaseResp
	Data Post `json:"data"`
}

type LikePostResp {
	BaseResp
	Data Post `json:"data"`
}

type GetPostCommentsResp {
	BaseResp
	Data  []Comment `json:"data"`
	Total int       `json:"total"`
}

// 评论相关响应
type CreateCommentResp {
	BaseResp
	Data Comment `json:"data"`
}

type LikeCommentResp {
	BaseResp
	Data Comment `json:"data"`
}

// 用户相关API服务
@server (
	group: user
)
service Super {
	@handler register
	post /api/user/register (RegisterReq) returns (RegisterResp)

	@handler login
	post /api/user/login (LoginReq) returns (LoginResp)

	@handler getUserInfo
	get /api/user/:user_id (GetUserInfoReq) returns (GetUserInfoResp)

	@handler getUser
	get /api/user/:user_id/detail (GetUserReq) returns (GetUserResp)

	@handler updateUserInfo
	put /api/user/:user_id (UpdateUserInfoReq) returns (UpdateUserInfoResp)

	@handler updateUserPassword
	put /api/user/:user_id/password (UpdateUserPasswordReq) returns (UpdateUserPasswordResp)

	@handler checkUserByEmail
	post /api/user/check-email (GetUserByEmailReq) returns (GetUserByEmailResp)

	@handler resetPassword
	post /api/user/reset-password (ResetPasswordReq) returns (ResetPasswordResp)

	@handler deleteUser
	delete /api/user/:user_id (DeleteUserReq) returns (DeleteUserResp)

	@handler updateUserVip
	post /api/user/:user_id/vip (UpdateUserVipReq) returns (UpdateUserVipResp)

	@handler getUsers
	get /api/users (GetUsersReq) returns (GetUsersResp)

	@handler getUserCount
	get /api/users/count (EmptyReq) returns (GetUserCountResp)

	// VIP相关用户API
	@handler getUserVipStatus
	get /api/user/:user_id/vip (GetUserInfoReq) returns (GetUserVipStatusResp)

	@handler checkUserVip
	get /api/user/:user_id/vip/check (CheckUserVipReq) returns (CheckUserVipResp)

	@handler updateAutoRenew
	put /api/user/:user_id/vip/auto-renew (UpdateAutoRenewReq) returns (BaseResp)

	@handler syncUserVipStatus
	post /api/user/:user_id/vip/sync (SyncUserVipStatusReq) returns (SyncUserVipStatusResp)

	@handler getVipOrders
	get /api/user/:user_id/vip/orders (GetVipOrdersReq) returns (GetVipOrdersResp)

	@handler getVipHistory
	get /api/user/:user_id/vip/records (GetVipHistoryReq) returns (GetVipHistoryResp)

	@handler createVipOrder
	post /api/user/:user_id/vip/orders (CreateVipOrderReq) returns (CreateVipOrderResp)

	@handler getUserActiveVipRecord
	get /api/user/:user_id/vip/active (GetUserActiveVipRecordReq) returns (GetUserActiveVipRecordResp)

	// 钱包相关API
	@handler getTransactions
	get /api/user/:user_id/transactions (GetTransactionsReq) returns (GetTransactionsResp)

	@handler getTransaction
	get /api/transactions/:transaction_id (GetTransactionReq) returns (GetTransactionResp)

	@handler recharge
	post /api/user/:user_id/wallet/recharge (RechargeReq) returns (RechargeResp)

	// 用户记忆相关API（需登录，从JWT中获取真实用户ID）
	@handler upsertUserMemory
	post /api/user/:user_id/memories (UpsertUserMemoryReq) returns (UpsertUserMemoryResp)

	@handler getUserMemories
	get /api/user/:user_id/memories (GetUserMemoriesReq) returns (GetUserMemoriesResp)

	@handler deleteUserMemory
	delete /api/user/:user_id/memories (DeleteUserMemoryReq) returns (DeleteUserMemoryResp)

	// 关注相关API
	@handler followUser
	post /api/user/:user_id/follow (FollowUserReq) returns (FollowUserResp)

	@handler unfollowUser
	delete /api/user/:user_id/follow (UnfollowUserReq) returns (FollowUserResp)

	@handler getFollowings
	get /api/user/:user_id/following (GetFollowingsReq) returns (GetFollowingsResp)

	@handler getFollowers
	get /api/user/:user_id/followers (GetFollowersReq) returns (GetFollowersResp)

	@handler checkFollow
	get /api/user/:follower_id/follow/:following_id/check (CheckFollowReq) returns (CheckFollowResp)
}

// VIP相关API服务
@server (
	group: vip
)
service Super {
	@handler getVipPlans
	get /api/vip/plans (EmptyReq) returns (GetVipPlansResp)

	@handler getVipPlan
	get /api/vip/plans/:plan_id (GetVipPlanReq) returns (GetVipPlanResp)

	@handler createVipPlan
	post /api/vip/plans (CreateVipPlanReq) returns (CreateVipPlanResp)
}

// 帖子相关API服务
@server (
	group: post
)
service Super {
	@handler getPosts
	get /api/posts (GetPostsReq) returns (GetPostsResp)

	@handler getPost
	get /api/posts/:post_id (GetPostReq) returns (GetPostResp)

	@handler createPost
	post /api/posts (CreatePostReq) returns (CreatePostResp)

	@handler likePost
	post /api/posts/:post_id/like (LikePostReq) returns (LikePostResp)

	@handler getPostComments
	get /api/posts/:post_id/comments (GetPostCommentsReq) returns (GetPostCommentsResp)
}

// 评论相关API服务
@server (
	group: comment
)
service Super {
	@handler createComment
	post /api/comments (CreateCommentReq) returns (CreateCommentResp)

	@handler likeComment
	post /api/comments/:comment_id/like (LikeCommentReq) returns (LikeCommentResp)
}

// 通知相关API服务
@server (
	group: notification
)
service Super {
	@handler getNotifications
	get /api/notifications (GetNotificationsReq) returns (GetNotificationsResp)

	@handler getUnreadCount
	get /api/notifications/unread (GetUnreadCountReq) returns (GetUnreadCountResp)

	@handler readNotification
	post /api/notifications/:id/read (ReadNotificationReq) returns (BaseResp)

	@handler readAllNotifications
	post /api/notifications/read-all (ReadAllNotificationsReq) returns (BaseResp)
}

// 虚拟形象相关结构
type BaseConfig {
	FaceShape string `json:"face_shape"`
	SkinColor string `json:"skin_color"`
	EyeType   string `json:"eye_type"`
	HairStyle string `json:"hair_style"`
	HairColor string `json:"hair_color"`
}

type OutfitConfig {
	Clothes     string   `json:"clothes"`
	Accessories []string `json:"accessories"`
	Background  string   `json:"background"`
}

type UserAvatar {
	UserId        string       `json:"user_id"`
	BaseConfig    BaseConfig   `json:"base_config"`
	CurrentOutfit OutfitConfig `json:"current_outfit"`
	OwnedOutfits  []string     `json:"owned_outfits"`
}

// 装扮物品结构
type OutfitPart {
	Id       string `json:"id"`
	Type     string `json:"type"`
	ImageUrl string `json:"image_url"`
}

type AvatarOutfit {
	Id          string       `json:"id"`
	Name        string       `json:"name"`
	Description string       `json:"description"`
	Category    string       `json:"category"`
	Style       string       `json:"style"`
	Price       float64      `json:"price"`
	IsFree      bool         `json:"is_free"`
	ImageUrl    string       `json:"image_url"`
	Parts       []OutfitPart `json:"parts"`
	CreatedAt   string       `json:"created_at"`
}

// 虚拟形象相关请求
type GetUserAvatarReq {
	UserId string `path:"user_id"`
}

type UpdateUserAvatarReq {
	UserId        string       `path:"user_id"`
	BaseConfig    BaseConfig   `json:"base_config"`
	CurrentOutfit OutfitConfig `json:"current_outfit"`
}

type GetAvatarOutfitsReq {
	Category string `form:"category,optional"`
	Style    string `form:"style,optional"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

type GetAvatarOutfitReq {
	OutfitId string `path:"outfit_id"`
}

type PurchaseAvatarOutfitReq {
	OutfitId string `path:"outfit_id"`
	UserId   string `json:"user_id"`
}

// 虚拟形象相关响应
type GetUserAvatarResp {
	BaseResp
	Data UserAvatar `json:"data"`
}

type UpdateUserAvatarResp {
	BaseResp
	Data UserAvatar `json:"data"`
}

type GetAvatarOutfitsResp {
	BaseResp
	Data  []AvatarOutfit `json:"data"`
	Total int            `json:"total"`
}

type GetAvatarOutfitResp {
	BaseResp
	Data AvatarOutfit `json:"data"`
}

type PurchaseAvatarOutfitResp {
	BaseResp
	Data string `json:"data"` // 返回购买记录ID
}

// 虚拟形象相关API服务
@server (
	group: avatar
)
service Super {
	// 获取用户形象
	@handler getUserAvatar
	get /api/avatar/:user_id (GetUserAvatarReq) returns (GetUserAvatarResp)

	// 更新用户形象
	@handler updateUserAvatar
	put /api/avatar/:user_id (UpdateUserAvatarReq) returns (UpdateUserAvatarResp)

	// 获取装扮物品列表
	@handler getAvatarOutfits
	get /api/avatar/outfits (GetAvatarOutfitsReq) returns (GetAvatarOutfitsResp)

	// 获取装扮物品详情
	@handler getAvatarOutfit
	get /api/avatar/outfits/:outfit_id (GetAvatarOutfitReq) returns (GetAvatarOutfitResp)

	// 购买装扮物品
	@handler purchaseAvatarOutfit
	post /api/avatar/outfits/:outfit_id/purchase (PurchaseAvatarOutfitReq) returns (PurchaseAvatarOutfitResp)
}

// 表情包相关结构
type Emoji {
	Id         string   `json:"id"`
	ImageUrl   string   `json:"image_url"`
	Tags       []string `json:"tags"`
	IsAnimated bool     `json:"is_animated"`
}

type EmojiPack {
	Id            string  `json:"id"`
	Name          string  `json:"name"`
	Description   string  `json:"description"`
	AuthorName    string  `json:"author_name"`
	Category      string  `json:"category"`
	Price         float64 `json:"price"`
	IsFree        bool    `json:"is_free"`
	CoverImage    string  `json:"cover_image"`
	Emojis        []Emoji `json:"emojis"`
	DownloadCount int     `json:"download_count"`
}

// 表情包相关请求
type GetEmojiPacksReq {
	Category string `form:"category,optional"`
	Page     int    `form:"page,default=1"`
	PageSize int    `form:"page_size,default=10"`
}

type GetEmojiPackReq {
	PackId string `path:"pack_id"`
}

type PurchaseEmojiPackReq {
	PackId string `path:"pack_id"`
	UserId string `json:"user_id"`
}

type GetUserEmojiPacksReq {
	UserId string `path:"user_id"`
}

type FavoriteEmojiPackReq {
	PackId string `path:"pack_id"`
	UserId string `json:"user_id"`
}

// 表情包相关响应
type GetEmojiPacksResp {
	BaseResp
	Data  []EmojiPack `json:"data"`
	Total int         `json:"total"`
}

type GetEmojiPackResp {
	BaseResp
	Data EmojiPack `json:"data"`
}

type PurchaseEmojiPackResp {
	BaseResp
	Data string `json:"data"` // 返回购买记录ID
}

type GetUserEmojiPacksResp {
	BaseResp
	Data []EmojiPack `json:"data"`
}

type FavoriteEmojiPackResp {
	BaseResp
}

// 表情包相关API服务
@server (
	group: emoji
)
service Super {
	// 获取表情包包列表
	@handler getEmojiPacks
	get /api/emoji/packs (GetEmojiPacksReq) returns (GetEmojiPacksResp)

	// 获取表情包包详情
	@handler getEmojiPack
	get /api/emoji/packs/:pack_id (GetEmojiPackReq) returns (GetEmojiPackResp)

	// 购买表情包包
	@handler purchaseEmojiPack
	post /api/emoji/packs/:pack_id/purchase (PurchaseEmojiPackReq) returns (PurchaseEmojiPackResp)

	// 获取用户已拥有的表情包包
	@handler getUserEmojiPacks
	get /api/user/:user_id/emoji/packs (GetUserEmojiPacksReq) returns (GetUserEmojiPacksResp)

	// 收藏表情包包
	@handler favoriteEmojiPack
	post /api/emoji/packs/:pack_id/favorite (FavoriteEmojiPackReq) returns (FavoriteEmojiPackResp)
}

// LLM 聊天相关结构
type LlmMessage {
	Role    string `json:"role"`
	Content string `json:"content"`
}

type LlmChatReq {
	Model    string       `json:"model"`
	Messages []LlmMessage `json:"messages"`
}

type LlmChatResp {
	BaseResp
	Content        string  `json:"content"`
	RemainingRatio float64 `json:"remaining_ratio"`
	Summarized     bool    `json:"summarized"`
}

type LlmModelsResp {
	BaseResp
	Models []string `json:"models"`
}

// LLM 聊天相关API服务
@server (
	group: llm
)
service Super {
	// 获取可用模型列表
	@handler models
	get /api/llm/models (EmptyReq) returns (LlmModelsResp)

	// 发送聊天消息
	@handler chat
	post /api/llm/chat (LlmChatReq) returns (LlmChatResp)
}

// 图片上传相关结构
type ImageInfo {
	Id        string `json:"id"`
	Filename  string `json:"filename"`
	Url       string `json:"url"`
	Size      int64  `json:"size"`
	CreatedAt string `json:"created_at"`
}

// 图片上传相关请求
type UploadImageReq {}

type DeleteImageReq {
	Filename string `path:"filename"`
}

type GetImageListReq {
	Page     int `form:"page,default=1"`
	PageSize int `form:"page_size,default=10"`
}

// 图片上传相关响应
type UploadImageResp {
	BaseResp
	Data ImageInfo `json:"data"`
}

type DeleteImageResp {
	BaseResp
}

type GetImageListResp {
	BaseResp
	Data  []ImageInfo `json:"data"`
	Total int         `json:"total"`
}

// 图片上传相关API服务
@server (
	group: image
)
service Super {
	// 上传图片
	@handler uploadImage
	post /api/upload (UploadImageReq) returns (UploadImageResp)

	// 获取图片列表
	@handler getImageList
	get /api/images (GetImageListReq) returns (GetImageListResp)

	// 删除图片
	@handler deleteImage
	delete /api/images/:filename (DeleteImageReq) returns (DeleteImageResp)

	// 查看图片（直接返回图片文件）
	@handler getImage
	get /api/images/:filename (DeleteImageReq) returns (EmptyResp)
}

// 语音通话相关请求
type GetRtcTokenReq {
	ChannelName string `form:"channel_name"`
	Role        uint8  `form:"role,optional,default=1"`
	UserAccount string `form:"user_account,optional"`
}

type GetRtcTokenResp {
	BaseResp
	Token string `json:"token"`
	AppId string `json:"app_id"`
}

// 语音通话相关API服务
@server (
	group: voice
	jwt:   Auth
)
service Super {
	@handler getRtcToken
	get /api/voice/token (GetRtcTokenReq) returns (GetRtcTokenResp)
}

// 聊天在线状态相关结构
type ChatOnlineReq {
	UserId string `form:"user_id"`
}

type ChatOnlineResp {
	BaseResp
	Online bool `json:"online"`
}

type ChatOnlineBatchReq {
	UserIds string `form:"user_ids"` // 逗号分隔的用户ID列表
}

type ChatOnlineBatchResp {
	BaseResp
	Online map[string]bool `json:"online"`
}

// 聊天在线状态相关API服务
@server (
	group: chat
)
service Super {
	// 查询单个用户在线状态
	@handler chatOnline
	get /api/chat/online (ChatOnlineReq) returns (ChatOnlineResp)

	// 批量查询用户在线状态
	@handler chatOnlineBatch
	get /api/chat/online/batch (ChatOnlineBatchReq) returns (ChatOnlineBatchResp)
}

