# 项目开发规范

本文档用于指导开发者（包括人类和 AI）遵循统一的开发标准。AI 助手会自动读取 `.cursorrules`，而人类开发者应参考本文档。

## 1. UI 设计规范 (Moe Style)

> 详见 `UI设计规范.md`

*   **核心风格**: 萌系、圆润、梦幻渐变。
*   **主色调**: 薰衣草紫 (`#7F7FD5`)。
*   **交互原则**: 所有页面切换和内容加载需带有 `FadeInUp` 动画；按钮点击需有反馈。

## 2. Flutter 前端规范

### 2.1 目录结构
*   `lib/models/`: 数据模型 (JSON 序列化)。
*   `lib/services/`: API 服务层，负责网络请求，不处理 UI 逻辑。
*   `lib/providers/`: 全局状态管理 (Theme, Auth)。
*   `lib/widgets/`: 通用组件 (FadeInUp, CustomButton, Avatar)。
*   `lib/utils/`: 工具类 (Validators, ErrorHandler)。

### 2.2 编码习惯
*   **空安全**: 严格遵守 Dart Null Safety。
*   **异步处理**: 使用 `async/await`，必须配合 `try-catch` 处理异常，并使用 `ErrorHandler` 反馈给用户。
*   **Widget 拆分**: 超过 100 行的 `build` 方法应拆分为子 Widget 或私有构建方法 `_buildXxx`。

## 3. 后端规范 (Go-zero)

*   **API 定义**: 修改 `.api` 文件后必须运行 `goctl` 生成代码。
*   **逻辑层**: 业务逻辑仅在 `internal/logic` 中实现。
*   **错误处理**: 统一使用自定义错误码。

## 4. 工作流 (AI 交互)

在与 AI 协作时，遵循以下步骤：
1.  **[模式：研究]**: 阅读相关代码，确认需求。
2.  **[模式：构思]**: 提出方案（如：UI 改造方案）。
3.  **[模式：计划]**: 列出修改文件清单。
4.  **[模式：执行]**: 编写代码。
5.  **[模式：评审]**: 检查是否符合 Moe 风格和代码规范。

