# ç­¾åˆ°ç­‰çº§ç®¡ç†åå°ç³»ç»Ÿå®æ–½æ–‡æ¡£

## é¡¹ç›®ç°çŠ¶æ€»ç»“

ç»è¿‡å…¨é¢çš„ä»£ç åˆ†æï¼Œå‘ç° **moe_social é¡¹ç›®å·²ç»å…·å¤‡äº†ç­¾åˆ°ç­‰çº§ç³»ç»Ÿ90%çš„åŸºç¡€åŠŸèƒ½**ï¼š

### âœ… å·²å®Œæ•´å®ç°çš„åŠŸèƒ½

#### 1. æ•°æ®åº“æ¨¡å‹å±‚ (100%å®Œæˆ)
- **UserLevel**: ç”¨æˆ·ç­‰çº§è¡¨ï¼ˆç­‰çº§ã€ç»éªŒå€¼ã€æ€»ç»éªŒï¼‰
- **LevelConfig**: ç­‰çº§é…ç½®è¡¨ï¼ˆç­‰çº§æ ‡é¢˜ã€æ‰€éœ€ç»éªŒã€ç‰¹æƒã€å¾½ç« ï¼‰
- **UserCheckIn**: ç”¨æˆ·ç­¾åˆ°è®°å½•è¡¨ï¼ˆç­¾åˆ°æ—¥æœŸã€è¿ç»­å¤©æ•°ã€ç»éªŒå¥–åŠ±ï¼‰
- **CheckInReward**: ç­¾åˆ°å¥–åŠ±é…ç½®è¡¨ï¼ˆè¿ç»­å¤©æ•°å¥–åŠ±è§„åˆ™ï¼‰
- **ExpLog**: ç»éªŒè·å¾—æ—¥å¿—è¡¨ï¼ˆå®Œæ•´çš„ç»éªŒå˜æ›´è¿½è¸ªï¼‰

#### 2. ç”¨æˆ·ç³»ç»ŸåŸºç¡€ (100%å®Œæˆ)
- **Useræ¨¡å‹å·²å«roleå­—æ®µ**: `user/admin/super_admin` ä¸‰ç§è§’è‰²
- **VIPç³»ç»Ÿå®Œæ•´**: å¥—é¤ã€è®¢å•ã€è®°å½•ç®¡ç†
- **é’±åŒ…ç³»ç»Ÿ**: ä½™é¢ç®¡ç†ã€äº¤æ˜“è®°å½•

#### 3. æ•°æ®åº“è¿ç§» (100%å®Œæˆ)
- è‡ªåŠ¨è¿ç§»æœºåˆ¶å·²é…ç½®ï¼ŒåŒ…å«æ‰€æœ‰ç­¾åˆ°ç­‰çº§ç›¸å…³è¡¨
- GORMæ ‡ç­¾å®Œæ•´ï¼Œè¡¨ç»“æ„å®šä¹‰æ¸…æ™°

#### 4. é¡¹ç›®æ¶æ„ (100%å®Œæˆ)
- Go-zeroå¾®æœåŠ¡æ¶æ„æˆç†Ÿ
- API/RPCåˆ†å±‚æ¸…æ™°
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¨¡å¼

### âŒ éœ€è¦æ–°å®ç°çš„åŠŸèƒ½

#### 1. APIç«¯ç‚¹å±‚ (0%å®Œæˆ)
ç›®å‰super.apiä¸­ç¼ºå°‘ä»¥ä¸‹ç«¯ç‚¹ï¼š

**ç”¨æˆ·ç«¯API (8ä¸ªç«¯ç‚¹)**:
- `POST /api/user/:user_id/check-in` - æ¯æ—¥ç­¾åˆ°
- `GET /api/user/:user_id/level` - è·å–ç”¨æˆ·ç­‰çº§ä¿¡æ¯
- `GET /api/user/:user_id/check-in/status` - ç­¾åˆ°çŠ¶æ€æŸ¥è¯¢
- `GET /api/user/:user_id/check-in/history` - ç­¾åˆ°å†å²
- `GET /api/user/:user_id/exp/logs` - ç»éªŒæ—¥å¿—
- `GET /api/user/:user_id/level/progress` - ç­‰çº§è¿›åº¦
- `GET /api/user/:user_id/level/rewards` - å¯é¢†å–å¥–åŠ±
- `POST /api/user/:user_id/level/claim-reward` - é¢†å–å¥–åŠ±

**ç®¡ç†å‘˜ç«¯API (10ä¸ªç«¯ç‚¹)**:
- `GET /api/admin/levels` - ç­‰çº§é…ç½®åˆ—è¡¨
- `POST /api/admin/levels` - åˆ›å»ºç­‰çº§é…ç½®
- `PUT /api/admin/levels/:level_id` - ç¼–è¾‘ç­‰çº§é…ç½®
- `DELETE /api/admin/levels/:level_id` - åˆ é™¤ç­‰çº§é…ç½®
- `GET /api/admin/check-in-rewards` - ç­¾åˆ°å¥–åŠ±é…ç½®
- `POST /api/admin/check-in-rewards` - åˆ›å»ºå¥–åŠ±é…ç½®
- `PUT /api/admin/check-in-rewards/:reward_id` - ç¼–è¾‘å¥–åŠ±
- `GET /api/admin/stats/overview` - ç³»ç»Ÿç»Ÿè®¡æ¦‚è§ˆ
- `GET /api/admin/stats/level` - ç­‰çº§ç»Ÿè®¡
- `GET /api/admin/stats/check-in` - ç­¾åˆ°ç»Ÿè®¡

#### 2. ä¸šåŠ¡é€»è¾‘å±‚ (0%å®Œæˆ)
- Handlerå±‚: 18ä¸ªhandleræ–‡ä»¶
- Logicå±‚: 18ä¸ªlogicæ–‡ä»¶
- æƒé™æ£€æŸ¥ä¸­é—´ä»¶

#### 3. å‰ç«¯UI (0%å®Œæˆ)
- ç­¾åˆ°é¡µé¢åŠç»„ä»¶
- ç­‰çº§è¿›åº¦æ˜¾ç¤ºç»„ä»¶
- ç®¡ç†åå°ç•Œé¢

---

## è¯¦ç»†å®æ–½è®¡åˆ’

### é˜¶æ®µä¸€ï¼šåç«¯APIå®ç° (é¢„è®¡5-6å·¥ä½œæ—¥)

#### 1.1 ä¿®æ”¹APIå®šä¹‰æ–‡ä»¶
**æ–‡ä»¶**: `backend/api/super.api`

åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ç­¾åˆ°ç­‰çº§ç›¸å…³çš„ç±»å‹å®šä¹‰å’ŒAPIç«¯ç‚¹ï¼š

```go
// ç­¾åˆ°ç­‰çº§ç›¸å…³ç»“æ„
type UserLevelInfo {
    Level       int    `json:"level"`
    Experience  int    `json:"experience"`
    TotalExp    int    `json:"total_exp"`
    NextLevelExp int   `json:"next_level_exp"`
    LevelTitle  string `json:"level_title"`
    BadgeUrl    string `json:"badge_url"`
    Progress    float64 `json:"progress"`
}

type CheckInStatus {
    HasCheckedToday    bool    `json:"has_checked_today"`
    ConsecutiveDays   int     `json:"consecutive_days"`
    TodayReward       int     `json:"today_reward"`
    NextDayReward     int     `json:"next_day_reward"`
    CanCheckIn        bool    `json:"can_check_in"`
}

type CheckInRecord {
    CheckInDate     string `json:"check_in_date"`
    ConsecutiveDays int    `json:"consecutive_days"`
    ExpReward       int    `json:"exp_reward"`
    IsSpecialReward bool   `json:"is_special_reward"`
    SpecialRewardDesc string `json:"special_reward_desc"`
}

// è¯·æ±‚å“åº”ç»“æ„
type CheckInReq {
    UserId string `path:"user_id"`
}

type GetUserLevelReq {
    UserId string `path:"user_id"`
}

type GetCheckInStatusReq {
    UserId string `path:"user_id"`
}

// å“åº”ç»“æ„
type CheckInResp {
    BaseResp
    Data struct {
        ExpGained       int    `json:"exp_gained"`
        NewLevel        int    `json:"new_level"`
        ConsecutiveDays int    `json:"consecutive_days"`
        LevelUp         bool   `json:"level_up"`
        SpecialReward   string `json:"special_reward"`
    } `json:"data"`
}

type GetUserLevelResp {
    BaseResp
    Data UserLevelInfo `json:"data"`
}

type GetCheckInStatusResp {
    BaseResp
    Data CheckInStatus `json:"data"`
}
```

ç„¶åæ·»åŠ APIæœåŠ¡å®šä¹‰ï¼š

```go
// ç­¾åˆ°ç­‰çº§ç›¸å…³APIæœåŠ¡
@server (
    group: checkin
)
service Super {
    @handler checkIn
    post /api/user/:user_id/check-in (CheckInReq) returns (CheckInResp)

    @handler getUserLevel
    get /api/user/:user_id/level (GetUserLevelReq) returns (GetUserLevelResp)

    @handler getCheckInStatus
    get /api/user/:user_id/check-in/status (GetCheckInStatusReq) returns (GetCheckInStatusResp)

    // å…¶ä»–ç­¾åˆ°ç­‰çº§API...
}

// ç®¡ç†å‘˜APIæœåŠ¡ (éœ€è¦æƒé™éªŒè¯)
@server (
    group: admin
    middleware: AdminAuth
)
service Super {
    // ç®¡ç†å‘˜ç›¸å…³APIç«¯ç‚¹...
}
```

#### 1.2 ç”ŸæˆAPIä»£ç 
æ‰§è¡Œä»£ç ç”Ÿæˆï¼š
```bash
cd backend/api
bash generate_api.sh
```

#### 1.3 å®ç°Handlerå±‚
**æ ¸å¿ƒæ–‡ä»¶**:
- `backend/api/internal/handler/checkin/checkinhandler.go`
- `backend/api/internal/handler/checkin/getuserlevelhandler.go`
- `backend/api/internal/handler/checkin/getcheckinsstatushandler.go`

**ç¤ºä¾‹å®ç°**:
```go
// checkinhandler.go
func (l *CheckInHandler) CheckIn(req *types.CheckInReq, r *http.Request) (*types.CheckInResp, error) {
    // è°ƒç”¨RPCæœåŠ¡å¤„ç†ç­¾åˆ°é€»è¾‘
    rpcReq := &super.CheckInRequest{
        UserId: req.UserId,
    }

    rpcResp, err := l.svcCtx.SuperRpc.CheckIn(l.ctx, rpcReq)
    if err != nil {
        return nil, err
    }

    return &types.CheckInResp{
        BaseResp: types.BaseResp{
            Code: 200,
            Message: "ç­¾åˆ°æˆåŠŸ",
            Success: true,
        },
        Data: types.CheckInData{
            ExpGained: int(rpcResp.ExpGained),
            NewLevel: int(rpcResp.NewLevel),
            // ...
        },
    }, nil
}
```

#### 1.4 å®ç°Logicå±‚
**æ ¸å¿ƒæ–‡ä»¶**:
- `backend/api/internal/logic/checkin/checkinlogic.go`
- `backend/api/internal/logic/checkin/getuserlevellogic.go`

**å…³é”®ä¸šåŠ¡é€»è¾‘**:

1. **ç­¾åˆ°é€»è¾‘**:
```go
func (l *CheckInLogic) CheckIn(req *types.CheckInReq) (*types.CheckInResp, error) {
    // 1. æ£€æŸ¥ä»Šæ—¥æ˜¯å¦å·²ç­¾åˆ°
    // 2. è®¡ç®—è¿ç»­ç­¾åˆ°å¤©æ•°
    // 3. æ ¹æ®è¿ç»­å¤©æ•°ç¡®å®šå¥–åŠ±
    // 4. VIPç”¨æˆ·ç»éªŒç¿»å€
    // 5. è®°å½•ç­¾åˆ°è®°å½•
    // 6. æ›´æ–°ç”¨æˆ·ç»éªŒå’Œç­‰çº§
    // 7. è®°å½•ç»éªŒæ—¥å¿—
}
```

2. **ç­‰çº§è®¡ç®—é€»è¾‘**:
```go
func calculateLevel(experience int) (level int, progress float64) {
    // æ ¹æ®LevelConfigè¡¨è®¡ç®—ç”¨æˆ·å½“å‰ç­‰çº§å’Œè¿›åº¦
}
```

3. **ç»éªŒå¢åŠ é€»è¾‘**:
```go
func AddExperience(userID uint, exp int, source, sourceID, description string) error {
    // 1. æ›´æ–°UserLevelè¡¨
    // 2. è®°å½•ExpLog
    // 3. æ£€æŸ¥æ˜¯å¦å‡çº§
    // 4. å‘é€å‡çº§é€šçŸ¥
}
```

#### 1.5 å®ç°æƒé™ä¸­é—´ä»¶
**æ–‡ä»¶**: `backend/api/internal/middleware/adminauth.go`

```go
func AdminAuth() rest.Middleware {
    return func(next http.HandlerFunc) http.HandlerFunc {
        return func(w http.ResponseWriter, r *http.Request) {
            // 1. ä»JWTä¸­è·å–ç”¨æˆ·ID
            // 2. æŸ¥è¯¢ç”¨æˆ·roleå­—æ®µ
            // 3. éªŒè¯æ˜¯å¦ä¸ºadminæˆ–super_admin
            // 4. è®°å½•ç®¡ç†æ“ä½œæ—¥å¿—
        }
    }
}
```

### é˜¶æ®µäºŒï¼šRPCæœåŠ¡å®ç° (é¢„è®¡3å·¥ä½œæ—¥)

#### 2.1 ä¿®æ”¹RPCå®šä¹‰
**æ–‡ä»¶**: `backend/rpc/super.proto`

æ·»åŠ ç­¾åˆ°ç­‰çº§ç›¸å…³çš„messageå’Œserviceå®šä¹‰

#### 2.2 ç”ŸæˆRPCä»£ç 
```bash
cd backend/rpc
bash generate_rpc.sh
```

#### 2.3 å®ç°RPC Logic
å®ç°æ ¸å¿ƒçš„ç­¾åˆ°ã€ç­‰çº§è®¡ç®—ç­‰ä¸šåŠ¡é€»è¾‘

### é˜¶æ®µä¸‰ï¼šå‰ç«¯UIå®ç° (é¢„è®¡6-8å·¥ä½œæ—¥)

#### 3.1 æ•°æ®æ¨¡å‹å±‚
**æ–‡ä»¶**: `lib/models/user_level.dart`

```dart
class UserLevel {
  final int level;
  final int experience;
  final int totalExp;
  final int nextLevelExp;
  final String levelTitle;
  final String badgeUrl;
  final double progress;

  // fromJson, toJson, copyWithç­‰æ–¹æ³•
}

class CheckInStatus {
  final bool hasCheckedToday;
  final int consecutiveDays;
  final int todayReward;
  final bool canCheckIn;

  // ...
}
```

#### 3.2 æœåŠ¡å±‚
**æ–‡ä»¶**: `lib/services/gamification_service.dart`

```dart
class GamificationService {
  static Future<UserLevel> getUserLevel(String userId) async {
    // è°ƒç”¨APIè·å–ç”¨æˆ·ç­‰çº§ä¿¡æ¯
  }

  static Future<CheckInResult> checkIn(String userId) async {
    // è°ƒç”¨ç­¾åˆ°API
  }

  static Future<CheckInStatus> getCheckInStatus(String userId) async {
    // è·å–ç­¾åˆ°çŠ¶æ€
  }
}
```

#### 3.3 ç­¾åˆ°é¡µé¢
**æ–‡ä»¶**: `lib/pages/check_in_page.dart`

èŒç³»è®¾è®¡é£æ ¼çš„ç­¾åˆ°é¡µé¢ï¼š
- æŸ”å’Œçš„#7F7FD5ä¸»è‰²è°ƒ
- 24pxåœ†è§’è®¾è®¡
- FadeInUpå…¥åœºåŠ¨ç”»
- ç­¾åˆ°æ—¥å†æ˜¾ç¤º
- å¥–åŠ±é¢„è§ˆ
- ç­¾åˆ°æŒ‰é’®ï¼ˆå¤§åœ†è§’Stadiumè¾¹æ¡†ï¼‰

#### 3.4 ç­‰çº§è¿›åº¦ç»„ä»¶
**æ–‡ä»¶**: `lib/widgets/level_progress_bar.dart`

```dart
class LevelProgressBar extends StatelessWidget {
  final UserLevel userLevel;
  final bool showAnimation;

  // åœ†è§’è¿›åº¦æ¡ï¼ŒèŒç³»é…è‰²
  // æ”¯æŒå‡çº§åŠ¨ç”»æ•ˆæœ
}
```

#### 3.5 ä¸ªäººèµ„æ–™é¡µé¢é›†æˆ
**æ–‡ä»¶**: `lib/pages/profile_page.dart` (ä¿®æ”¹)

åœ¨ä¸ªäººèµ„æ–™é¡µé¢æ·»åŠ ï¼š
- ç”¨æˆ·ç­‰çº§å¾½ç« æ˜¾ç¤º
- ç»éªŒè¿›åº¦æ¡
- ç­¾åˆ°çŠ¶æ€æç¤º
- å¿«æ·ç­¾åˆ°æŒ‰é’®

### é˜¶æ®µå››ï¼šç®¡ç†åå°å®ç° (é¢„è®¡5-7å·¥ä½œæ—¥)

#### 4.1 ç®¡ç†åå°æ•°æ®æœåŠ¡
**æ–‡ä»¶**: `lib/services/admin_service.dart`

```dart
class AdminService {
  static Future<List<LevelConfig>> getLevelConfigs() async {}
  static Future<LevelConfig> createLevelConfig(LevelConfig config) async {}
  static Future<LevelConfig> updateLevelConfig(LevelConfig config) async {}
  // ...
}
```

#### 4.2 ç®¡ç†åå°é¡µé¢
**æ–‡ä»¶**: `lib/pages/admin/admin_dashboard_page.dart`

ç®¡ç†åå°é¦–é¡µï¼š
- ç³»ç»Ÿç»Ÿè®¡æ¦‚è§ˆ
- å¿«æ·ç®¡ç†å…¥å£
- æ•°æ®å›¾è¡¨å±•ç¤º

**æ–‡ä»¶**: `lib/pages/admin/level_management_page.dart`

ç­‰çº§é…ç½®ç®¡ç†ï¼š
- ç­‰çº§åˆ—è¡¨å±•ç¤º
- åˆ›å»º/ç¼–è¾‘ç­‰çº§é…ç½®è¡¨å•
- æ‰¹é‡æ“ä½œåŠŸèƒ½

#### 4.3 æƒé™æ§åˆ¶
åœ¨è·¯ç”±å’Œé¡µé¢çº§åˆ«æ·»åŠ ç®¡ç†å‘˜æƒé™æ£€æŸ¥

---

## å…³é”®å®ç°ç»†èŠ‚

### 1. ç­¾åˆ°é€»è¾‘è®¾è®¡

```go
// ç­¾åˆ°æ ¸å¿ƒç®—æ³•
func ProcessCheckIn(userID uint) (*CheckInResult, error) {
    // 1. æ£€æŸ¥ä»Šæ—¥ç­¾åˆ°çŠ¶æ€
    today := time.Now().Format("2006-01-02")
    lastCheckIn := getUserLastCheckIn(userID)

    if lastCheckIn != nil && lastCheckIn.CheckInDate.Format("2006-01-02") == today {
        return nil, errors.New("ä»Šæ—¥å·²ç­¾åˆ°")
    }

    // 2. è®¡ç®—è¿ç»­å¤©æ•°
    consecutiveDays := 1
    if lastCheckIn != nil {
        yesterday := time.Now().AddDate(0, 0, -1).Format("2006-01-02")
        if lastCheckIn.CheckInDate.Format("2006-01-02") == yesterday {
            consecutiveDays = lastCheckIn.ConsecutiveDays + 1
        }
    }

    // 3. ç¡®å®šå¥–åŠ±
    baseExp := 10
    reward := getCheckInReward(consecutiveDays)
    totalExp := baseExp + reward.ExpReward

    // 4. VIPåŠ æˆ
    user := getUserByID(userID)
    if user.IsVip {
        totalExp *= 2
    }

    // 5. ä¿å­˜ç­¾åˆ°è®°å½•
    checkInRecord := &UserCheckIn{
        UserID: userID,
        CheckInDate: time.Now(),
        ConsecutiveDays: consecutiveDays,
        ExpReward: totalExp,
    }
    saveCheckInRecord(checkInRecord)

    // 6. å¢åŠ ç»éªŒ
    oldLevel := getUserLevel(userID)
    addExperience(userID, totalExp, "check_in", "", "æ¯æ—¥ç­¾åˆ°")
    newLevel := getUserLevel(userID)

    return &CheckInResult{
        ExpGained: totalExp,
        ConsecutiveDays: consecutiveDays,
        LevelUp: newLevel.Level > oldLevel.Level,
        NewLevel: newLevel.Level,
    }, nil
}
```

### 2. ç­‰çº§ç³»ç»Ÿè®¾è®¡

**é»˜è®¤ç­‰çº§é…ç½®**:
```go
var defaultLevels = []LevelConfig{
    {Level: 1, Title: "èŒæ–°èœé¸Ÿ", MinExp: 0, MaxExp: 100, BadgeUrl: "/badges/level1.png"},
    {Level: 2, Title: "æ´»è·ƒæ–°æ‰‹", MinExp: 100, MaxExp: 500, BadgeUrl: "/badges/level2.png"},
    {Level: 3, Title: "ç¤¾åŒºä¸­åš", MinExp: 500, MaxExp: 2000, BadgeUrl: "/badges/level3.png"},
    {Level: 4, Title: "èµ„æ·±è¾¾äºº", MinExp: 2000, MaxExp: 5000, BadgeUrl: "/badges/level4.png"},
    {Level: 5, Title: "ç¤¾åŒºå¤§å¸ˆ", MinExp: 5000, MaxExp: 999999, BadgeUrl: "/badges/level5.png"},
}
```

**ç­‰çº§ç‰¹æƒé…ç½®**:
```json
{
  "daily_post_limit": 10,
  "daily_comment_limit": 50,
  "can_use_premium_emoji": true,
  "storage_quota_gb": 2,
  "exclusive_features": ["priority_support", "exclusive_frames"]
}
```

### 3. ç»éªŒæ¥æºè®¾è®¡

```go
const (
    ExpSourceCheckIn     = "check_in"      // ç­¾åˆ°: 10ç»éªŒ
    ExpSourcePost        = "post"          // å‘å¸–: 5ç»éªŒ
    ExpSourceComment     = "comment"       // è¯„è®º: 2ç»éªŒ
    ExpSourceLikeReceived = "like_received" // è·èµ: 1ç»éªŒ
    ExpSourceVipBonus    = "vip_bonus"     // VIPåŠ æˆ
    ExpSourceTaskComplete = "task_complete" // ä»»åŠ¡å®Œæˆ
    ExpSourceEventReward = "event_reward"  // æ´»åŠ¨å¥–åŠ±
)

// VIPç”¨æˆ·ç»éªŒåŠ æˆè§„åˆ™
func applyVipBonus(baseExp int, isVip bool) int {
    if isVip {
        return int(float64(baseExp) * 1.5) // VIPç”¨æˆ·1.5å€ç»éªŒ
    }
    return baseExp
}
```

---

## æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

### ç­‰çº§é…ç½®åˆå§‹åŒ–
**æ–‡ä»¶**: `backend/scripts/init_level_configs.go`

```go
func InitLevelConfigs() error {
    configs := []model.LevelConfig{
        {Level: 1, Title: "èŒæ–°èœé¸Ÿ", MinExp: 0, MaxExp: 100},
        {Level: 2, Title: "æ´»è·ƒæ–°æ‰‹", MinExp: 100, MaxExp: 500},
        {Level: 3, Title: "ç¤¾åŒºä¸­åš", MinExp: 500, MaxExp: 2000},
        {Level: 4, Title: "èµ„æ·±è¾¾äºº", MinExp: 2000, MaxExp: 5000},
        {Level: 5, Title: "ç¤¾åŒºå¤§å¸ˆ", MinExp: 5000, MaxExp: 999999},
    }

    for _, config := range configs {
        utils.DB.FirstOrCreate(&config, model.LevelConfig{Level: config.Level})
    }
    return nil
}
```

### ç­¾åˆ°å¥–åŠ±é…ç½®åˆå§‹åŒ–
```go
func InitCheckInRewards() error {
    rewards := []model.CheckInReward{
        {ConsecutiveDays: 1, ExpReward: 0},    // åŸºç¡€ç­¾åˆ°æ— é¢å¤–å¥–åŠ±
        {ConsecutiveDays: 3, ExpReward: 5},    // è¿ç»­3å¤©+5ç»éªŒ
        {ConsecutiveDays: 7, ExpReward: 20},   // è¿ç»­7å¤©+20ç»éªŒ
        {ConsecutiveDays: 15, ExpReward: 50},  // è¿ç»­15å¤©+50ç»éªŒ
        {ConsecutiveDays: 30, ExpReward: 100}, // è¿ç»­30å¤©+100ç»éªŒ
    }

    for _, reward := range rewards {
        utils.DB.FirstOrCreate(&reward, model.CheckInReward{ConsecutiveDays: reward.ConsecutiveDays})
    }
    return nil
}
```

---

## æµ‹è¯•è®¡åˆ’

### 1. å•å…ƒæµ‹è¯•
- ç­¾åˆ°é€»è¾‘æµ‹è¯•ï¼ˆè¿ç»­å¤©æ•°ã€é‡å¤ç­¾åˆ°ã€VIPåŠ æˆï¼‰
- ç­‰çº§è®¡ç®—æµ‹è¯•
- ç»éªŒå¢åŠ æµ‹è¯•
- æƒé™éªŒè¯æµ‹è¯•

### 2. é›†æˆæµ‹è¯•
- APIç«¯ç‚¹æµ‹è¯•ï¼ˆä½¿ç”¨Postman/curlï¼‰
- æ•°æ®åº“äº‹åŠ¡æµ‹è¯•
- å¹¶å‘ç­¾åˆ°æµ‹è¯•

### 3. UIæµ‹è¯•
- ä¸åŒå±å¹•å°ºå¯¸é€‚é…
- åŠ¨ç”»æµç•…æ€§æµ‹è¯•
- ç”¨æˆ·äº¤äº’æµ‹è¯•

---

## éƒ¨ç½²å’Œä¸Šçº¿

### 1. æ•°æ®åº“è¿ç§»
ç”±äºGORMè‡ªåŠ¨è¿ç§»æœºåˆ¶ï¼Œæ–°è¡¨ä¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»º

### 2. åˆå§‹æ•°æ®å¯¼å…¥
è¿è¡Œç­‰çº§é…ç½®å’Œç­¾åˆ°å¥–åŠ±çš„åˆå§‹åŒ–è„šæœ¬

### 3. æ¸è¿›å¼ä¸Šçº¿
1. åç«¯APIå…ˆè¡Œéƒ¨ç½²
2. å‰ç«¯åŠŸèƒ½é€æ­¥å‘å¸ƒ
3. ç®¡ç†åå°æœ€åä¸Šçº¿

---

## é¢„æœŸå·¥ä½œé‡æ€»ç»“

| é˜¶æ®µ | å·¥ä½œå†…å®¹ | é¢„è®¡å·¥ä½œæ—¥ | è´Ÿè´£äººå»ºè®® |
|------|----------|------------|------------|
| åç«¯API | APIå®šä¹‰ã€Handlerã€Logicã€æƒé™ | 5-6å¤© | åç«¯å¼€å‘ |
| RPCæœåŠ¡ | RPCå®šä¹‰ã€ä¸šåŠ¡é€»è¾‘å®ç° | 3å¤© | åç«¯å¼€å‘ |
| å‰ç«¯UI | ç­¾åˆ°é¡µé¢ã€ç­‰çº§ç»„ä»¶ã€é›†æˆ | 6-8å¤© | å‰ç«¯å¼€å‘ |
| ç®¡ç†åå° | ç®¡ç†ç•Œé¢ã€æƒé™æ§åˆ¶ | 5-7å¤© | å…¨æ ˆå¼€å‘ |
| æµ‹è¯•è°ƒè¯• | å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€UIæµ‹è¯• | 3-4å¤© | å…¨å›¢é˜Ÿ |

**æ€»è®¡**: 22-28ä¸ªå·¥ä½œæ—¥ (çº¦4-5.5å‘¨)

---

## å…³é”®é£é™©ç‚¹ä¸è§£å†³æ–¹æ¡ˆ

### 1. å¹¶å‘ç­¾åˆ°é—®é¢˜
**é£é™©**: å¤šè¯·æ±‚åŒæ—¶ç­¾åˆ°å¯¼è‡´æ•°æ®ä¸ä¸€è‡´
**è§£å†³**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡å’Œä¹è§‚é”

### 2. ç­‰çº§è®¡ç®—æ€§èƒ½
**é£é™©**: å¤§é‡ç”¨æˆ·ç­‰çº§è®¡ç®—å½±å“æ€§èƒ½
**è§£å†³**: å®ç°Redisç¼“å­˜ï¼Œå¼‚æ­¥æ›´æ–°ç­‰çº§

### 3. VIPåŠ æˆé€»è¾‘
**é£é™©**: VIPçŠ¶æ€åˆ¤æ–­å’Œç»éªŒåŠ æˆå¯èƒ½ä¸å‡†ç¡®
**è§£å†³**: åœ¨ç»éªŒå¢åŠ æ—¶å®æ—¶æŸ¥è¯¢VIPçŠ¶æ€

### 4. ç®¡ç†å‘˜æƒé™æ§åˆ¶
**é£é™©**: æƒé™éªŒè¯ä¸ä¸¥æ ¼å¯¼è‡´å®‰å…¨é—®é¢˜
**è§£å†³**: å¤šå±‚æƒé™éªŒè¯ï¼Œæ“ä½œæ—¥å¿—å®Œæ•´è®°å½•

---

## ç»“è®º

åŸºäºç°æœ‰çš„moe_socialé¡¹ç›®ä»£ç ï¼Œ**ç­¾åˆ°ç­‰çº§ç®¡ç†åå°ç³»ç»Ÿçš„å®ç°ç›¸å¯¹ç®€å•**ï¼Œå› ä¸ºï¼š

1. âœ… **æ•°æ®æ¨¡å‹å±‚å·²100%å®Œæˆ** - æ— éœ€ä¿®æ”¹æ•°æ®åº“ç»“æ„
2. âœ… **åŸºç¡€æ¶æ„å·²æˆç†Ÿ** - æŒ‰ç°æœ‰æ¨¡å¼æ‰©å±•å³å¯
3. âœ… **VIPå’Œç”¨æˆ·ç³»ç»Ÿå·²å®Œæ•´** - å¯ç›´æ¥é›†æˆ
4. ğŸ”„ **ä¸»è¦å·¥ä½œé›†ä¸­åœ¨APIå’ŒUIå±‚** - å·¥ä½œé‡å¯æ§ä¸”é£é™©è¾ƒä½

**å»ºè®®ä¼˜å…ˆçº§**:
1. å…ˆå®ç°ç”¨æˆ·ç«¯çš„ç­¾åˆ°å’Œç­‰çº§åŠŸèƒ½ï¼ˆæ ¸å¿ƒä»·å€¼ï¼‰
2. å†å®ç°ç®¡ç†åå°ï¼ˆè¿è¥éœ€æ±‚ï¼‰
3. æœ€åä¼˜åŒ–UIå’Œç”¨æˆ·ä½“éªŒ

è¿™æ ·å¯ä»¥å¿«é€Ÿä¸Šçº¿æ ¸å¿ƒåŠŸèƒ½ï¼Œç„¶åé€æ­¥å®Œå–„ç®¡ç†å’Œè¿è¥å·¥å…·ã€‚